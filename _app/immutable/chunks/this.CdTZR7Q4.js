import{w as S,a0 as T,x as u,a1 as h,q as c,v as _,E as v,a2 as R,a3 as q,a4 as x,a5 as E,z as y,a6 as N,a7 as g,d as F,a8 as L,S as O}from"./utils.D_ZagUSB.js";function b(s,i,r,t=null,f=!1){c&&_();var a=s,e=null,n=null,l=null,A=f?v:0;S(()=>{if(l===(l=!!i()))return;let d=!1;if(c){const k=a.data===R;l===k&&(a=q(),x(a),E(!1),d=!0)}l?(e?T(e):e=u(()=>r(a)),n&&h(n,()=>{n=null})):(n?T(n):t&&(n=u(()=>t(a))),e&&h(e,()=>{e=null})),d&&E(!0)},A),c&&(a=y)}function p(s,i,r){c&&_();var t=s,f,a;S(()=>{f!==(f=i())&&(a&&(h(a),a=null),f&&(a=u(()=>r(t,f))))},v),c&&(t=y)}function o(s,i){return s===i||(s==null?void 0:s[O])===i}function w(s={},i,r,t){return N(()=>{var f,a;return g(()=>{f=a,a=[],F(()=>{s!==r(...a)&&(i(s,...a),f&&o(r(...f),s)&&i(null,...f))})}),()=>{L(()=>{a&&o(r(...a),s)&&i(null,...a)})}}),s}export{w as b,p as c,b as i};
